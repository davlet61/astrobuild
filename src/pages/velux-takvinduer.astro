---
import Layout from '$layouts/Page.astro';
import BlogPost from '$components/BlogPost.astro';
import { getSanityImageURL } from '$lib/sanity.image';
import { getPostBySlug } from '$lib/sanity.client';

const post = await getPostBySlug('velux-takvinduer');
if (Object.keys(post).length <= 0) {
  return Astro.redirect('/404');
}
const seo = {
  title: post.title,
  description: post.description,
  keywords: post.seoKeywords?.join(','),
  image: post.mainImage && getSanityImageURL(post.mainImage).width(1200).url(),
};
---

<Layout seo={seo}>
  <BlogPost post={post} />
</Layout>
