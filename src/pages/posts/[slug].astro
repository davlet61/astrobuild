---
import Layout from '$layouts/Post.astro';
import BlogPost from '$components/Astro/BlogPost.astro';
import { client } from '$tina/__generated__/databaseClient';
import type { Post } from '$tina/__generated__/types';

const { slug } = Astro.params;

// if (slug === 'smijernsdor' || slug === 'velux-takvinduer' || slug === 'home') {
//  return Astro.redirect('/404');
// }

const result = await client.queries.post({ relativePath: `${slug}.md` });
const post  = result.data.post as Post

const seo = {
  title: post.title,
  description: post?.description || '',
  keywords: post?.seoKeywords || '',
  image: post?.mainImage?.url || '',
};
---

<Layout seo={seo}>
  <BlogPost post={post} />
</Layout>
